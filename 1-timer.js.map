{"version":3,"file":"1-timer.js","sources":["../src/js/1-timer.js"],"sourcesContent":["'use strict';\n\nimport flatpickr from 'flatpickr';\nimport 'flatpickr/dist/flatpickr.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\n\nconst elements = {\n    inputEl: document.getElementById('datetime-picker'),\n    showDays: document.querySelector('span[data-days]'),\n    showHours: document.querySelector('span[data-hours]'),\n    showMinutes: document.querySelector('span[data-minutes]'),\n    showSeconds: document.querySelector('span[data-seconds]'),\n    startBtn: document.querySelector('button[data-start]'),\n};\n\nlet userSelectedDate = null;\nlet interval;\n\nfunction addLeadingZero(value) {\n    return value.toString().padStart(2, '0');\n}\n\n\nfunction convertMs(ms) {\n    const second = 1000;\n    const minute = second * 60;\n    const hour = minute * 60;\n    const day = hour * 24;\n\n    const days = Math.floor(ms / day);\n    const hours = Math.floor((ms % day) / hour);\n    const minutes = Math.floor(((ms % day) % hour) / minute);\n    const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n    return { days, hours, minutes, seconds };\n}\n\n\nconst options = {\n    enableTime: true,\n    time_24hr: true,\n    defaultDate: new Date(),\n    minuteIncrement: 1,\n    onClose(selectedDates) {\n        userSelectedDate = selectedDates[0];\n\n\n        if (userSelectedDate && userSelectedDate > new Date()) {\n            elements.startBtn.disabled = false;\n        } else {\n            elements.startBtn.disabled = true;\n            iziToast.error({\n                title: 'Error',\n                message: \"Please choose a date in the future\",\n            });\n        }\n    },\n};\n\ndocument.addEventListener('DOMContentLoaded', function () {\n\n    flatpickr(elements.inputEl, options);\n\n\n    elements.startBtn.addEventListener('click', function () {\n\n        if (!userSelectedDate || userSelectedDate <= new Date()) {\n            iziToast.error({\n                title: 'Error',\n                message: \"Please choose a future date\",\n            });\n            return;\n        }\n\n\n        elements.inputEl.disabled = true;\n        elements.startBtn.disabled = true;\n\n        const targetDate = userSelectedDate.getTime();\n\n        interval = setInterval(() => {\n            const currentTime = new Date().getTime();\n            const timeDifference = targetDate - currentTime;\n\n\n            if (timeDifference <= 0) {\n                clearInterval(interval);\n                elements.showDays.textContent = '00';\n                elements.showHours.textContent = '00';\n                elements.showMinutes.textContent = '00';\n                elements.showSeconds.textContent = '00';\n                iziToast.success({\n                    title: 'Done',\n                    message: \"Time's up!\",\n                });\n\n\n                elements.inputEl.disabled = false;\n                elements.startBtn.disabled = true;\n                interval = null;\n                return;\n            }\n\n\n            const { days, hours, minutes, seconds } = convertMs(timeDifference);\n\n\n            elements.showDays.textContent = addLeadingZero(days);\n            elements.showHours.textContent = addLeadingZero(hours);\n            elements.showMinutes.textContent = addLeadingZero(minutes);\n            elements.showSeconds.textContent = addLeadingZero(seconds);\n        }, 1000);\n    });\n});\n"],"names":["elements","userSelectedDate","interval","addLeadingZero","value","convertMs","ms","days","hours","minutes","seconds","options","selectedDates","iziToast","flatpickr","targetDate","currentTime","timeDifference"],"mappings":"sGAQA,MAAMA,EAAW,CACb,QAAS,SAAS,eAAe,iBAAiB,EAClD,SAAU,SAAS,cAAc,iBAAiB,EAClD,UAAW,SAAS,cAAc,kBAAkB,EACpD,YAAa,SAAS,cAAc,oBAAoB,EACxD,YAAa,SAAS,cAAc,oBAAoB,EACxD,SAAU,SAAS,cAAc,oBAAoB,CACzD,EAEA,IAAIC,EAAmB,KACnBC,EAEJ,SAASC,EAAeC,EAAO,CAC3B,OAAOA,EAAM,SAAU,EAAC,SAAS,EAAG,GAAG,CAC3C,CAGA,SAASC,EAAUC,EAAI,CAMnB,MAAMC,EAAO,KAAK,MAAMD,EAAK,KAAG,EAC1BE,EAAQ,KAAK,MAAOF,EAAK,MAAO,IAAI,EACpCG,EAAU,KAAK,MAAQH,EAAK,MAAO,KAAQ,GAAM,EACjDI,EAAU,KAAK,MAASJ,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAC,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CAC1C,CAGA,MAAMC,EAAU,CACZ,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CACnBX,EAAmBW,EAAc,CAAC,EAG9BX,GAAoBA,EAAmB,IAAI,KAC3CD,EAAS,SAAS,SAAW,IAE7BA,EAAS,SAAS,SAAW,GAC7Ba,EAAS,MAAM,CACX,MAAO,QACP,QAAS,oCACzB,CAAa,EAER,CACL,EAEA,SAAS,iBAAiB,mBAAoB,UAAY,CAEtDC,EAAUd,EAAS,QAASW,CAAO,EAGnCX,EAAS,SAAS,iBAAiB,QAAS,UAAY,CAEpD,GAAI,CAACC,GAAoBA,GAAoB,IAAI,KAAQ,CACrDY,EAAS,MAAM,CACX,MAAO,QACP,QAAS,6BACzB,CAAa,EACD,MACH,CAGDb,EAAS,QAAQ,SAAW,GAC5BA,EAAS,SAAS,SAAW,GAE7B,MAAMe,EAAad,EAAiB,UAEpCC,EAAW,YAAY,IAAM,CACzB,MAAMc,EAAc,IAAI,KAAM,EAAC,QAAO,EAChCC,EAAiBF,EAAaC,EAGpC,GAAIC,GAAkB,EAAG,CACrB,cAAcf,CAAQ,EACtBF,EAAS,SAAS,YAAc,KAChCA,EAAS,UAAU,YAAc,KACjCA,EAAS,YAAY,YAAc,KACnCA,EAAS,YAAY,YAAc,KACnCa,EAAS,QAAQ,CACb,MAAO,OACP,QAAS,YAC7B,CAAiB,EAGDb,EAAS,QAAQ,SAAW,GAC5BA,EAAS,SAAS,SAAW,GAC7BE,EAAW,KACX,MACH,CAGD,KAAM,CAAE,KAAAK,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,GAAYL,EAAUY,CAAc,EAGlEjB,EAAS,SAAS,YAAcG,EAAeI,CAAI,EACnDP,EAAS,UAAU,YAAcG,EAAeK,CAAK,EACrDR,EAAS,YAAY,YAAcG,EAAeM,CAAO,EACzDT,EAAS,YAAY,YAAcG,EAAeO,CAAO,CAC5D,EAAE,GAAI,CACf,CAAK,CACL,CAAC"}